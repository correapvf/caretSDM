% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/confidence_map.R
\name{confidence_map}
\alias{confidence_map}
\alias{confidence_map.train}
\alias{confidence_map.list}
\alias{confidence_map.ensemble.train}
\title{Create confidence maps}
\usage{
confidence_map(model, ...)

\method{confidence_map}{train}(model, rasterStack, nrep = 200, progress = TRUE, ...)

\method{confidence_map}{list}(model, rasterStack, nrep = 200, progress = TRUE, ...)

\method{confidence_map}{ensemble.train}(model, rasterStack, nrep = 200, progress = TRUE, ...)
}
\arguments{
\item{model}{A model returned by \code{\link[caret]{train}} or \code{\link{createEnsemble}}.}

\item{...}{ignored}

\item{rasterStack}{A RasterStack from the \code{raster} package, used to create predictions.}

\item{nrep}{Number of bootstrap replicates.}

\item{progress}{logical. Show progress text? If parallel is activated, it automatically defaults to \code{FALSE}.}
}
\value{
For 'train' or 'list' methods, a list with \code{$means} and \code{$sds} containing
'RasterLayers' (for 'train') or 'RasterStacks' (for 'list', each layer representing one model).
 For 'ensemble.train' method, a single 'RasterLayer' is returned.
}
\description{
Create confidence maps using bootstrap replicates
}
\details{
For each interaction (defined by nrep), the trained data set for each model is resampled (bootstrap)
and each model retrained using this new data.\cr
Predictions are made for each model for each interaction, separately.

For 'train' objects, the mean and standard deviation of all replicates are retuned.

For 'ensemble.train' objects, the coefficient of variation is calculated for each model, which in turn is assembled
based on algorithmic used to create the ensemble:
\tabular{ll}{
\code{mean, weighted_mean   ->} \tab \figure{eq_mean.png}\cr
\code{median, number_votes  ->} \tab \figure{eq_median.png}
}
Where \code{cvi =} mean coefficient of variation for model \code{i},\cr
\code{pi =} predictions for model \code{i} using all training data,\cr
\code{wi =} weight of model \code{i},\cr
and \code{p =} predictions of the ensemble using all training data.\cr
For \code{weighted_mean}, \code{wi = metric/sum(all metrics)};
and for \code{mean}, \code{wi = 1/(number of models)}.
}
